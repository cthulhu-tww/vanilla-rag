# Vanilla RAG

## ğŸŒŸ é¡¹ç›®èƒŒæ™¯

éšç€å¤§è¯­è¨€æ¨¡å‹åœ¨ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›å’ŒåŸºç¡€æ€§èƒ½ä¸Šçš„æŒç»­æå‡ï¼Œå„ç§é«˜çº§ **RAGï¼ˆRetrieval-Augmented Generationï¼‰** æŠ€æœ¯çš„æœ€ä½³å®è·µä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ã€‚ç„¶è€Œï¼Œ
**Native-RAG çš„æ ¸å¿ƒæœºåˆ¶åœ¨è¾ƒé•¿ä¸€æ®µæ—¶é—´å†…ä»å°†ä¿æŒç¨³å®š**ã€‚

æœ¬é¡¹ç›®çš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªå°½å¯èƒ½â€œåŸç”Ÿâ€ã€è½»é‡ä¸”æ˜“äºç†è§£çš„ RAG å®ç°ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå…¥é—¨å¹¶æŒæ¡ RAG çš„åŸºæœ¬åŸç†ã€‚

---

## ğŸ’¡ å¼€å‘åˆè¡·

å¸‚åœºä¸Šå·²æœ‰è®¸å¤šä¼˜ç§€çš„å¼€æº RAG å®ç°ï¼Œä½†å®ƒä»¬å¾€å¾€ä¼´éšç€è¾ƒé«˜çš„å­¦ä¹ é—¨æ§›æˆ–å¤æ‚çš„é¡¹ç›®ç»“æ„ï¼Œè¿™å¯¹äº AI åº”ç”¨çˆ±å¥½è€…æˆ–ä¸­å°å‹å›¢é˜Ÿæ¥è¯´å¹¶ä¸å‹å¥½ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº† **Vanilla RAG**ï¼šä¸€ä¸ª**æç®€ã€é€æ˜ã€æ— æ¡†æ¶ä¾èµ–**çš„ RAG ç³»ç»Ÿå®ç°ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾ä¸Šæ‰‹å¹¶æ·±å…¥ç†è§£ RAG çš„åº•å±‚é€»è¾‘ã€‚

---

## ğŸ“¦ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®ä¸º **å—äº¬æ¸…æ¹›äººå·¥æ™ºèƒ½ç ”ç©¶é™¢** å†…éƒ¨ RAG å¹³å°ç®€åŒ–åçš„å¼€æºç‰ˆæœ¬ï¼Œæ˜¯ä¸€ä¸ªæ‹¥æŠ± **MCPï¼ˆModel Context Protocolï¼‰** çš„ RAG ç³»ç»Ÿã€‚

ä¸é¡¹ç›®åç§°ä¸€è‡´ï¼Œæˆ‘ä»¬åŠ›æ±‚ä½¿ç”¨æœ€â€œåŸç”Ÿâ€çš„æ–¹å¼å®ç° RAG
åŠŸèƒ½ï¼Œä»…å°‘é‡ä¾èµ–å¦‚ [Haystack-ai](https://github.com/deepset-ai/haystack) çš„å·¥å…·ç±»å‡½æ•°ï¼Œ**ä¸ä¾èµ–ä»»ä½•å¤æ‚ AI æ¡†æ¶
**ï¼Œä¾¿äºç†è§£ä¸äºŒæ¬¡å¼€å‘ã€‚

---

## ğŸ§± é¡¹ç›®ç»“æ„è¯´æ˜

### `rag/` â€”â€” RAG æ ¸å¿ƒæœåŠ¡ç«¯ä»£ç 

- åŒ…å«ä¸¤ä¸ªå­æ¨¡å—ï¼š
    - `server`ï¼šçŸ¥è¯†åº“ç®¡ç†æœåŠ¡ç«¯ä»£ç ã€‚
    - `core`ï¼šNative-RAG çš„æ ¸å¿ƒå®ç°é€»è¾‘ã€‚

### `inference/` â€”â€” æ¨¡å‹æ¨ç†æ¨¡å—

- ä½¿ç”¨ä»¥ä¸‹æ¨¡å‹è¿›è¡Œå…³é”®åŠŸèƒ½æ”¯æŒï¼š
    - **[Surya-OCR](https://github.com/VikParuchuri/surya)**ï¼šç”¨äºæ–‡æ¡£è¯†åˆ«ã€‚
    - **[BAAI/bge-m3](https://huggingface.co/BAAI/bge-m3)**ï¼šç”¨äºæ–‡æœ¬åµŒå…¥ã€‚
    - **[BAAI/bge-reranker-v2-m3](https://huggingface.co/BAAI/bge-reranker-v2-m3)**ï¼šç”¨äºé‡æ’åºæ£€ç´¢ç»“æœã€‚

### `mcpserver/` â€”â€” MCP åè®®æœåŠ¡å™¨Demo

- æä¾›ä»¥ä¸‹è¾…åŠ©åŠŸèƒ½ï¼š
    - PDF æ¸²æŸ“ã€‚
    - åŸºäº Pollinations-AI çš„æ–‡æœ¬ç”Ÿæˆå›¾åƒï¼ˆtext2imageï¼‰èƒ½åŠ›ã€‚

### `web/` â€”â€” è½»é‡çº§å‰ç«¯ç•Œé¢

- æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š
    - çŸ¥è¯†åº“ç®¡ç† UIã€‚
    - èŠå¤©äº¤äº’ç•Œé¢ã€‚
    - Markdown å¢é‡æ¸²æŸ“ + Mermaid å›¾è¡¨ + LaTexå…¬å¼æ”¯æŒã€‚
    - æ–‡ä»¶ä¸Šä¼ è§£æ + MCP åŠŸèƒ½é›†æˆã€‚

---

## âš™ï¸ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### ç¯å¢ƒå‡†å¤‡

- Python 3.11+
- `uv`ï¼ˆPython åŒ…ç®¡ç†å™¨ï¼‰
- Node.jsï¼ˆç”¨äºå‰ç«¯ï¼‰
- milvus 2.5.x

### å¯åŠ¨æ­¥éª¤

#### å‰ç«¯é¡¹ç›®ï¼ˆwebï¼‰

```bash
cd web
npm install
npm run dev
```

#### åç«¯é¡¹ç›®ï¼ˆrag / inference / mcpserverï¼‰

```bash
cd rag
uv sync
uv run python main.py
```

### é…ç½®ç›¸å…³

rag/config.yaml å¯ä»¥é…ç½®MilvusæœåŠ¡å™¨åœ°å€ä»¥åŠMCPå’Œæ¨¡å‹æœåŠ¡åœ°å€
inference/config.yaml å¯ä»¥é…ç½®OCRå¹¶å‘æ•°ï¼Œè¯¦æƒ…å¯è§[surya-ocr](https://github.com/VikParuchuri/surya)


> å…¶ä»–æ¨¡å—åŒç†ï¼Œåˆ‡æ¢ç›®å½•åæ‰§è¡Œç›¸åŒå‘½ä»¤å³å¯ã€‚

---

## âš ï¸ å•†æ ‡ä¸å…è´£å£°æ˜

> æœ¬é¡¹ç›®ä¸­æ‰€ä½¿ç”¨çš„ **å—äº¬æ¸…æ¹›äººå·¥æ™ºèƒ½ç ”ç©¶é™¢ Logo** åŠç›¸å…³å“ç‰Œæ ‡è¯†å‡ä¸ºå…¶åˆæ³•æŒæœ‰è€…çš„å•†æ ‡èµ„äº§ã€‚  
> æœªç»ä¹¦é¢æˆæƒï¼Œç¦æ­¢å°†ä¸Šè¿°æ ‡è¯†ç”¨äºè¡ç”Ÿé¡¹ç›®çš„å®£ä¼ ã€åŒ…è£…æˆ–å“ç‰Œæ ‡è¯†ä¸­ã€‚  
> æœ¬é¡¹ç›®é‡‡ç”¨ GPLv3.0 å¼€æºåè®®ï¼Œè¯¥åè®®ä¸æˆäºˆä»»ä½•å•†æ ‡ä½¿ç”¨æƒã€‚

> æœ¬é¡¹ç›®ä¸­çš„å†…å®¹å’ŒæŠ€æœ¯å®ç°ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œä¸ä»£è¡¨å®˜æ–¹ç«‹åœºæˆ–èƒŒä¹¦ã€‚
> è‹¥ä½ å¯¹æœ¬é¡¹ç›®æœ‰ä»»ä½•ç–‘é—®æˆ–åˆä½œæ„å‘ï¼Œè¯·é€šè¿‡ä»¥ä¸‹è”ç³»æ–¹å¼ä¸æˆ‘ä»¬æ²Ÿé€šã€‚
> [å—äº¬æ¸…æ¹›äººå·¥æ™ºèƒ½ç ”ç©¶é™¢](https://tsingzhan.com/)

## æ¼”ç¤º

![RAG](./assets/RAG.png)
![mermaid å›¾è¡¨](./assets/mermaid.png)
![æ•°å­¦å…¬å¼](./assets/laTex.png)
![æ–‡ä»¶èŠå¤©](./assets/file-chat.png)
![MCPæ–‡ç”Ÿå›¾](./assets/MCP-text2image.png)
![MCP pdfæ¸²æŸ“](./assets/MCP-pdf.png)

## è·¯çº¿å›¾

- [ ] æ›´åº•å±‚çš„Native-RAGå®ç°
- [ ] Ollamaæ”¯æŒ
- [ ] å¤šMCPæœåŠ¡æ”¯æŒ
- [ ] RAG-MCPå®ç°


